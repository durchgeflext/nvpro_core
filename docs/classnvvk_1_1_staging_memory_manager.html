<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nvpro_core: nvvk::StagingMemoryManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">nvpro_core<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classnvvk_1_1_staging_memory_manager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classnvvk_1_1_staging_memory_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">nvvk::StagingMemoryManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;stagingmemorymanager_vk.hpp&gt;</code></p>
<div class="dynheader">
Collaboration diagram for nvvk::StagingMemoryManager:</div>
<div class="dyncontent">
<div class="center"><img src="classnvvk_1_1_staging_memory_manager__coll__graph.png" border="0" usemap="#anvvk_1_1_staging_memory_manager_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnvvk_1_1_staging_memory_manager_1_1_entry.html">Entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvvk_1_1_staging_memory_manager_1_1_set_i_d.html">SetID</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnvvk_1_1_staging_memory_manager_1_1_staging_set.html">StagingSet</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0adc9543ecc07bcb63c6388f17f4d4cf" id="r_a0adc9543ecc07bcb63c6388f17f4d4cf"><td class="memItemLeft" align="right" valign="top"><a id="a0adc9543ecc07bcb63c6388f17f4d4cf" name="a0adc9543ecc07bcb63c6388f17f4d4cf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>StagingMemoryManager</b> (<a class="el" href="classnvvk_1_1_staging_memory_manager.html">StagingMemoryManager</a> const &amp;)=delete</td></tr>
<tr class="separator:a0adc9543ecc07bcb63c6388f17f4d4cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c7d4dc2cfbb047bf3cf9a77e3e91c3f" id="r_a1c7d4dc2cfbb047bf3cf9a77e3e91c3f"><td class="memItemLeft" align="right" valign="top"><a id="a1c7d4dc2cfbb047bf3cf9a77e3e91c3f" name="a1c7d4dc2cfbb047bf3cf9a77e3e91c3f"></a>
<a class="el" href="classnvvk_1_1_staging_memory_manager.html">StagingMemoryManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classnvvk_1_1_staging_memory_manager.html">StagingMemoryManager</a> const &amp;)=delete</td></tr>
<tr class="separator:a1c7d4dc2cfbb047bf3cf9a77e3e91c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ee00d4177527b230f93e5d62d44c82" id="r_a74ee00d4177527b230f93e5d62d44c82"><td class="memItemLeft" align="right" valign="top"><a id="a74ee00d4177527b230f93e5d62d44c82" name="a74ee00d4177527b230f93e5d62d44c82"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>StagingMemoryManager</b> (<a class="el" href="classnvvk_1_1_mem_allocator.html">MemAllocator</a> *memAllocator, VkDeviceSize stagingBlockSize=(VkDeviceSize(64) *1024 *1024), VkBufferUsageFlags extraBufferUsageFlags=0)</td></tr>
<tr class="separator:a74ee00d4177527b230f93e5d62d44c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a134b82613681928244c6569e8d5389b5" id="r_a134b82613681928244c6569e8d5389b5"><td class="memItemLeft" align="right" valign="top"><a id="a134b82613681928244c6569e8d5389b5" name="a134b82613681928244c6569e8d5389b5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>init</b> (<a class="el" href="classnvvk_1_1_mem_allocator.html">MemAllocator</a> *memAllocator, VkDeviceSize stagingBlockSize=(VkDeviceSize(64) *1024 *1024), VkBufferUsageFlags extraBufferUsageFlags=0)</td></tr>
<tr class="separator:a134b82613681928244c6569e8d5389b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac034fcfced67b6d6c03680e1a9d1ba2b" id="r_ac034fcfced67b6d6c03680e1a9d1ba2b"><td class="memItemLeft" align="right" valign="top"><a id="ac034fcfced67b6d6c03680e1a9d1ba2b" name="ac034fcfced67b6d6c03680e1a9d1ba2b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>deinit</b> ()</td></tr>
<tr class="separator:ac034fcfced67b6d6c03680e1a9d1ba2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa478c9389c9df9836528374dce0c9d96" id="r_aa478c9389c9df9836528374dce0c9d96"><td class="memItemLeft" align="right" valign="top"><a id="aa478c9389c9df9836528374dce0c9d96" name="aa478c9389c9df9836528374dce0c9d96"></a>
VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><b>getBlockSize</b> () const</td></tr>
<tr class="separator:aa478c9389c9df9836528374dce0c9d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4257e4faa329c9171e415d17e26137b" id="r_ae4257e4faa329c9171e415d17e26137b"><td class="memItemLeft" align="right" valign="top"><a id="ae4257e4faa329c9171e415d17e26137b" name="ae4257e4faa329c9171e415d17e26137b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setDebugName</b> (const std::string &amp;name)</td></tr>
<tr class="separator:ae4257e4faa329c9171e415d17e26137b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966b93e0432070953bcd51b7e331f65e" id="r_a966b93e0432070953bcd51b7e331f65e"><td class="memItemLeft" align="right" valign="top"><a id="a966b93e0432070953bcd51b7e331f65e" name="a966b93e0432070953bcd51b7e331f65e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setFreeUnusedOnRelease</b> (bool state)</td></tr>
<tr class="separator:a966b93e0432070953bcd51b7e331f65e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741212fbb567dbccab2fe8bd8228ee18" id="r_a741212fbb567dbccab2fe8bd8228ee18"><td class="memItemLeft" align="right" valign="top"><a id="a741212fbb567dbccab2fe8bd8228ee18" name="a741212fbb567dbccab2fe8bd8228ee18"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>fitsInAllocated</b> (VkDeviceSize size, bool toDevice=true) const</td></tr>
<tr class="separator:a741212fbb567dbccab2fe8bd8228ee18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e1b5857ad9a100220bb1ebf624d4faa" id="r_a5e1b5857ad9a100220bb1ebf624d4faa"><td class="memItemLeft" align="right" valign="top"><a id="a5e1b5857ad9a100220bb1ebf624d4faa" name="a5e1b5857ad9a100220bb1ebf624d4faa"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>cmdToImage</b> (VkCommandBuffer cmd, VkImage image, const VkOffset3D &amp;offset, const VkExtent3D &amp;extent, const VkImageSubresourceLayers &amp;subresource, VkDeviceSize size, const void *data, VkImageLayout layout=VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL)</td></tr>
<tr class="separator:a5e1b5857ad9a100220bb1ebf624d4faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94034644639aac934d1c8719e5e4a53a" id="r_a94034644639aac934d1c8719e5e4a53a"><td class="memTemplParams" colspan="2"><a id="a94034644639aac934d1c8719e5e4a53a" name="a94034644639aac934d1c8719e5e4a53a"></a>
template&lt;class T &gt; </td></tr>
<tr class="memitem:a94034644639aac934d1c8719e5e4a53a"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><b>cmdToImageT</b> (VkCommandBuffer cmd, VkImage image, const VkOffset3D &amp;offset, const VkExtent3D &amp;extent, const VkImageSubresourceLayers &amp;subresource, VkDeviceSize size, const void *data, VkImageLayout layout=VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL)</td></tr>
<tr class="separator:a94034644639aac934d1c8719e5e4a53a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31391975ed66d007b6c6c1023f777a0d" id="r_a31391975ed66d007b6c6c1023f777a0d"><td class="memItemLeft" align="right" valign="top"><a id="a31391975ed66d007b6c6c1023f777a0d" name="a31391975ed66d007b6c6c1023f777a0d"></a>
const void *&#160;</td><td class="memItemRight" valign="bottom"><b>cmdFromImage</b> (VkCommandBuffer cmd, VkImage image, const VkOffset3D &amp;offset, const VkExtent3D &amp;extent, const VkImageSubresourceLayers &amp;subresource, VkDeviceSize size, VkImageLayout layout=VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL)</td></tr>
<tr class="separator:a31391975ed66d007b6c6c1023f777a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b22c04073012063a842da1da6fef85a" id="r_a4b22c04073012063a842da1da6fef85a"><td class="memTemplParams" colspan="2"><a id="a4b22c04073012063a842da1da6fef85a" name="a4b22c04073012063a842da1da6fef85a"></a>
template&lt;class T &gt; </td></tr>
<tr class="memitem:a4b22c04073012063a842da1da6fef85a"><td class="memTemplItemLeft" align="right" valign="top">const T *&#160;</td><td class="memTemplItemRight" valign="bottom"><b>cmdFromImageT</b> (VkCommandBuffer cmd, VkImage image, const VkOffset3D &amp;offset, const VkExtent3D &amp;extent, const VkImageSubresourceLayers &amp;subresource, VkDeviceSize size, VkImageLayout layout=VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL)</td></tr>
<tr class="separator:a4b22c04073012063a842da1da6fef85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ea160f20205c0c85c2c2bcb7fbbbaa" id="r_a01ea160f20205c0c85c2c2bcb7fbbbaa"><td class="memItemLeft" align="right" valign="top"><a id="a01ea160f20205c0c85c2c2bcb7fbbbaa" name="a01ea160f20205c0c85c2c2bcb7fbbbaa"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>cmdToBuffer</b> (VkCommandBuffer cmd, VkBuffer buffer, VkDeviceSize offset, VkDeviceSize size, const void *data)</td></tr>
<tr class="separator:a01ea160f20205c0c85c2c2bcb7fbbbaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a836d626090fb8b91d2061678415fa357" id="r_a836d626090fb8b91d2061678415fa357"><td class="memTemplParams" colspan="2"><a id="a836d626090fb8b91d2061678415fa357" name="a836d626090fb8b91d2061678415fa357"></a>
template&lt;class T &gt; </td></tr>
<tr class="memitem:a836d626090fb8b91d2061678415fa357"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><b>cmdToBufferT</b> (VkCommandBuffer cmd, VkBuffer buffer, VkDeviceSize offset, VkDeviceSize size)</td></tr>
<tr class="separator:a836d626090fb8b91d2061678415fa357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7216e5df7cc45f7b1a641ee286aaa663" id="r_a7216e5df7cc45f7b1a641ee286aaa663"><td class="memItemLeft" align="right" valign="top"><a id="a7216e5df7cc45f7b1a641ee286aaa663" name="a7216e5df7cc45f7b1a641ee286aaa663"></a>
const void *&#160;</td><td class="memItemRight" valign="bottom"><b>cmdFromBuffer</b> (VkCommandBuffer cmd, VkBuffer buffer, VkDeviceSize offset, VkDeviceSize size)</td></tr>
<tr class="separator:a7216e5df7cc45f7b1a641ee286aaa663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa067dab4c7c4db10bad331f6646b2a95" id="r_aa067dab4c7c4db10bad331f6646b2a95"><td class="memTemplParams" colspan="2"><a id="aa067dab4c7c4db10bad331f6646b2a95" name="aa067dab4c7c4db10bad331f6646b2a95"></a>
template&lt;class T &gt; </td></tr>
<tr class="memitem:aa067dab4c7c4db10bad331f6646b2a95"><td class="memTemplItemLeft" align="right" valign="top">const T *&#160;</td><td class="memTemplItemRight" valign="bottom"><b>cmdFromBufferT</b> (VkCommandBuffer cmd, VkBuffer buffer, VkDeviceSize offset, VkDeviceSize size)</td></tr>
<tr class="separator:aa067dab4c7c4db10bad331f6646b2a95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf32a06eaece18cc006790407626220f" id="r_aaf32a06eaece18cc006790407626220f"><td class="memItemLeft" align="right" valign="top"><a id="aaf32a06eaece18cc006790407626220f" name="aaf32a06eaece18cc006790407626220f"></a>
const void *&#160;</td><td class="memItemRight" valign="bottom"><b>cmdFromAddressNV</b> (VkCommandBuffer cmd, VkDeviceAddress address, VkDeviceSize size)</td></tr>
<tr class="separator:aaf32a06eaece18cc006790407626220f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c5db653426b0e3e0d5bdc09535eb430" id="r_a8c5db653426b0e3e0d5bdc09535eb430"><td class="memTemplParams" colspan="2"><a id="a8c5db653426b0e3e0d5bdc09535eb430" name="a8c5db653426b0e3e0d5bdc09535eb430"></a>
template&lt;class T &gt; </td></tr>
<tr class="memitem:a8c5db653426b0e3e0d5bdc09535eb430"><td class="memTemplItemLeft" align="right" valign="top">const T *&#160;</td><td class="memTemplItemRight" valign="bottom"><b>cmdFromAddressNVT</b> (VkCommandBuffer cmd, VkDeviceAddress address, VkDeviceSize size)</td></tr>
<tr class="separator:a8c5db653426b0e3e0d5bdc09535eb430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde4053e4827eb1c75511debebf6d31e" id="r_acde4053e4827eb1c75511debebf6d31e"><td class="memItemLeft" align="right" valign="top"><a id="acde4053e4827eb1c75511debebf6d31e" name="acde4053e4827eb1c75511debebf6d31e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>finalizeResources</b> (VkFence fence=VK_NULL_HANDLE)</td></tr>
<tr class="separator:acde4053e4827eb1c75511debebf6d31e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa25d808f531cfa402547c81e605f727d" id="r_aa25d808f531cfa402547c81e605f727d"><td class="memItemLeft" align="right" valign="top"><a id="aa25d808f531cfa402547c81e605f727d" name="aa25d808f531cfa402547c81e605f727d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>releaseResources</b> ()</td></tr>
<tr class="separator:aa25d808f531cfa402547c81e605f727d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75ede0d79969a4a6f6deee4e9a78d3b4" id="r_a75ede0d79969a4a6f6deee4e9a78d3b4"><td class="memItemLeft" align="right" valign="top"><a id="a75ede0d79969a4a6f6deee4e9a78d3b4" name="a75ede0d79969a4a6f6deee4e9a78d3b4"></a>
<a class="el" href="classnvvk_1_1_staging_memory_manager_1_1_set_i_d.html">SetID</a>&#160;</td><td class="memItemRight" valign="bottom"><b>finalizeResourceSet</b> ()</td></tr>
<tr class="separator:a75ede0d79969a4a6f6deee4e9a78d3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5967de86acf15d617e9c826a529d1c0b" id="r_a5967de86acf15d617e9c826a529d1c0b"><td class="memItemLeft" align="right" valign="top"><a id="a5967de86acf15d617e9c826a529d1c0b" name="a5967de86acf15d617e9c826a529d1c0b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>releaseResourceSet</b> (<a class="el" href="classnvvk_1_1_staging_memory_manager_1_1_set_i_d.html">SetID</a> setid)</td></tr>
<tr class="separator:a5967de86acf15d617e9c826a529d1c0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19602daeec3a31a388a5199226bb91df" id="r_a19602daeec3a31a388a5199226bb91df"><td class="memItemLeft" align="right" valign="top"><a id="a19602daeec3a31a388a5199226bb91df" name="a19602daeec3a31a388a5199226bb91df"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>freeUnused</b> ()</td></tr>
<tr class="separator:a19602daeec3a31a388a5199226bb91df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09f15c733bb55be059f6cfe2bb0c1f87" id="r_a09f15c733bb55be059f6cfe2bb0c1f87"><td class="memItemLeft" align="right" valign="top"><a id="a09f15c733bb55be059f6cfe2bb0c1f87" name="a09f15c733bb55be059f6cfe2bb0c1f87"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>getUtilization</b> (VkDeviceSize &amp;allocatedSize, VkDeviceSize &amp;usedSize) const</td></tr>
<tr class="separator:a09f15c733bb55be059f6cfe2bb0c1f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:aa51e75edd573f75489277f1dc1447495" id="r_aa51e75edd573f75489277f1dc1447495"><td class="memItemLeft" align="right" valign="top"><a id="aa51e75edd573f75489277f1dc1447495" name="aa51e75edd573f75489277f1dc1447495"></a>
static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>INVALID_ID_INDEX</b> = ~0</td></tr>
<tr class="separator:aa51e75edd573f75489277f1dc1447495"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:afd729dc1a06a04f07d223b9f1596fcb3" id="r_afd729dc1a06a04f07d223b9f1596fcb3"><td class="memItemLeft" align="right" valign="top"><a id="afd729dc1a06a04f07d223b9f1596fcb3" name="afd729dc1a06a04f07d223b9f1596fcb3"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>setIndexValue</b> (uint32_t &amp;index, uint32_t newValue)</td></tr>
<tr class="separator:afd729dc1a06a04f07d223b9f1596fcb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb62d6c0463fdd0ece6c841aad57e800" id="r_aeb62d6c0463fdd0ece6c841aad57e800"><td class="memItemLeft" align="right" valign="top"><a id="aeb62d6c0463fdd0ece6c841aad57e800" name="aeb62d6c0463fdd0ece6c841aad57e800"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>free</b> (bool unusedOnly)</td></tr>
<tr class="separator:aeb62d6c0463fdd0ece6c841aad57e800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6183bfedba2588220f9ccd098968ef0f" id="r_a6183bfedba2588220f9ccd098968ef0f"><td class="memItemLeft" align="right" valign="top"><a id="a6183bfedba2588220f9ccd098968ef0f" name="a6183bfedba2588220f9ccd098968ef0f"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>newStagingIndex</b> ()</td></tr>
<tr class="separator:a6183bfedba2588220f9ccd098968ef0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecc3d08db8af241c259919458c1d07b0" id="r_aecc3d08db8af241c259919458c1d07b0"><td class="memItemLeft" align="right" valign="top"><a id="aecc3d08db8af241c259919458c1d07b0" name="aecc3d08db8af241c259919458c1d07b0"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>getStagingSpace</b> (VkDeviceSize size, VkBuffer &amp;buffer, VkDeviceSize &amp;offset, bool toDevice)</td></tr>
<tr class="separator:aecc3d08db8af241c259919458c1d07b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ab8c812bb50f43d8f805007f9bf64d3" id="r_a4ab8c812bb50f43d8f805007f9bf64d3"><td class="memItemLeft" align="right" valign="top"><a id="a4ab8c812bb50f43d8f805007f9bf64d3" name="a4ab8c812bb50f43d8f805007f9bf64d3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>releaseResources</b> (uint32_t stagingID)</td></tr>
<tr class="separator:a4ab8c812bb50f43d8f805007f9bf64d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a996d53bbd5c4c064ae634441150ad201" id="r_a996d53bbd5c4c064ae634441150ad201"><td class="memItemLeft" align="right" valign="top"><a id="a996d53bbd5c4c064ae634441150ad201" name="a996d53bbd5c4c064ae634441150ad201"></a>
VkDevice&#160;</td><td class="memItemRight" valign="bottom"><b>m_device</b> = VK_NULL_HANDLE</td></tr>
<tr class="separator:a996d53bbd5c4c064ae634441150ad201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e84debe8695f21c9e0958b816f0bab" id="r_a26e84debe8695f21c9e0958b816f0bab"><td class="memItemLeft" align="right" valign="top"><a id="a26e84debe8695f21c9e0958b816f0bab" name="a26e84debe8695f21c9e0958b816f0bab"></a>
<a class="el" href="classnvvk_1_1_buffer_sub_allocator.html">BufferSubAllocator</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_subToDevice</b></td></tr>
<tr class="separator:a26e84debe8695f21c9e0958b816f0bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8ee06ab6386d0a622841e4a5caa60b" id="r_abc8ee06ab6386d0a622841e4a5caa60b"><td class="memItemLeft" align="right" valign="top"><a id="abc8ee06ab6386d0a622841e4a5caa60b" name="abc8ee06ab6386d0a622841e4a5caa60b"></a>
<a class="el" href="classnvvk_1_1_buffer_sub_allocator.html">BufferSubAllocator</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_subFromDevice</b></td></tr>
<tr class="separator:abc8ee06ab6386d0a622841e4a5caa60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92abeb8f6d4627ea22a965775ed85eeb" id="r_a92abeb8f6d4627ea22a965775ed85eeb"><td class="memItemLeft" align="right" valign="top"><a id="a92abeb8f6d4627ea22a965775ed85eeb" name="a92abeb8f6d4627ea22a965775ed85eeb"></a>
std::vector&lt; <a class="el" href="structnvvk_1_1_staging_memory_manager_1_1_staging_set.html">StagingSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>m_sets</b></td></tr>
<tr class="separator:a92abeb8f6d4627ea22a965775ed85eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885183237e63c4e996fe923e3c952994" id="r_a885183237e63c4e996fe923e3c952994"><td class="memItemLeft" align="right" valign="top"><a id="a885183237e63c4e996fe923e3c952994" name="a885183237e63c4e996fe923e3c952994"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_stagingIndex</b></td></tr>
<tr class="separator:a885183237e63c4e996fe923e3c952994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74395c00b3d872b61018eb0c2254cebf" id="r_a74395c00b3d872b61018eb0c2254cebf"><td class="memItemLeft" align="right" valign="top"><a id="a74395c00b3d872b61018eb0c2254cebf" name="a74395c00b3d872b61018eb0c2254cebf"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_freeStagingIndex</b></td></tr>
<tr class="separator:a74395c00b3d872b61018eb0c2254cebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b86815bd0ad155422d1672deabcd508" id="r_a8b86815bd0ad155422d1672deabcd508"><td class="memItemLeft" align="right" valign="top"><a id="a8b86815bd0ad155422d1672deabcd508" name="a8b86815bd0ad155422d1672deabcd508"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>m_debugName</b></td></tr>
<tr class="separator:a8b86815bd0ad155422d1672deabcd508"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>@DOC_START </p>
<h1><a class="anchor" id="autotoc_md319"></a>
class nvvk::StagingMemoryManager</h1>
<p><a class="el" href="classnvvk_1_1_staging_memory_manager.html">nvvk::StagingMemoryManager</a> class is a utility that manages host visible buffers and their allocations in an opaque fashion to assist asynchronous transfers between device and host. The memory for this is allocated using the provided nvvk::MemAllocator.</p>
<p>The collection of the transfer resources is represented by nvvk::StagingID.</p>
<p>The necessary buffer space is sub-allocated and recycled by using one nvvk::BufferSubAllocator per transfer direction (to or from device).</p>
<blockquote class="doxtable">
<p>&zwj;<b>WARNING:</b></p><ul>
<li>cannot manage a copy &gt; 4 GB </li>
</ul>
</blockquote>
<p>Usage:</p><ul>
<li>Enqueue transfers into your VkCommandBuffer and then finalize the copy operations.</li>
<li>Associate the copy operations with a VkFence or retrieve a <a class="el" href="classnvvk_1_1_staging_memory_manager_1_1_set_i_d.html">SetID</a></li>
<li>The release of the resources allows to safely recycle the buffer space for future transfers.</li>
</ul>
<blockquote class="doxtable">
<p>&zwj;We use fences as a way to garbage collect here, however a more robust solution may be implementing some sort of ticketing/timeline system. If a fence is recycled, then this class may not be aware that the fence represents a different submission, likewise if the fence is deleted elsewhere problems can occur. You may want to use the manual "SetID" system in that case. </p>
</blockquote>
<p>Example :</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classnvvk_1_1_staging_memory_manager.html">StagingMemoryManager</a>  staging;</div>
<div class="line">staging.init(memAllocator);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Enqueue copy operations of data to target buffer.</span></div>
<div class="line"><span class="comment">// This internally manages the required staging resources</span></div>
<div class="line">staging.cmdToBuffer(cmd, targetBufer, 0, targetSize, targetData);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// you can also get access to a temporary mapped pointer and fill</span></div>
<div class="line"><span class="comment">// the staging buffer directly</span></div>
<div class="line">vertices = staging.cmdToBufferT&lt;Vertex&gt;(cmd, targetBufer, 0, targetSize);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// OPTION A:</span></div>
<div class="line"><span class="comment">// associate all previous copy operations with a fence (or not)</span></div>
<div class="line">staging.finalizeResources( fence );</div>
<div class="line">..</div>
<div class="line"><span class="comment">// every once in a while call</span></div>
<div class="line">staging.releaseResources();</div>
<div class="line"><span class="comment">// this will release all those without fence, or those</span></div>
<div class="line"><span class="comment">// who had a fence that completed (but never manual SetIDs, see next).</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// OPTION B</span></div>
<div class="line"><span class="comment">// alternatively manage the resource release yourself.</span></div>
<div class="line"><span class="comment">// The SetID represents the staging resources</span></div>
<div class="line"><span class="comment">// since any last finalize.</span></div>
<div class="line">sid = staging.finalizeResourceSet();</div>
<div class="line"> </div>
<div class="line">... </div>
<div class="line"><span class="comment">// You need to ensure these transfers and their staging</span></div>
<div class="line"><span class="comment">// data access completed yourself prior releasing the set.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This is particularly useful for managing downloads from</span></div>
<div class="line"><span class="comment">// device. The &quot;from&quot; functions return a pointer  where the </span></div>
<div class="line"><span class="comment">// data will be copied to. You want to use this pointer</span></div>
<div class="line"><span class="comment">// after the device-side transfer completed, and then</span></div>
<div class="line"><span class="comment">// release its resources once you are done using it.</span></div>
<div class="line"> </div>
<div class="line">staging.releaseResourceSet(sid);</div>
<div class="ttc" id="aclassnvvk_1_1_staging_memory_manager_html"><div class="ttname"><a href="classnvvk_1_1_staging_memory_manager.html">nvvk::StagingMemoryManager</a></div><div class="ttdef"><b>Definition</b> stagingmemorymanager_vk.hpp:107</div></div>
</div><!-- fragment --><p> @DOC_END </p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li><b>stagingmemorymanager_vk.hpp</b></li>
<li><b>stagingmemorymanager_vk.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacenvvk.html">nvvk</a></li><li class="navelem"><a class="el" href="classnvvk_1_1_staging_memory_manager.html">StagingMemoryManager</a></li>
    <li class="footer">Generated on Thu Apr 3 2025 15:08:55 for nvpro_core by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
