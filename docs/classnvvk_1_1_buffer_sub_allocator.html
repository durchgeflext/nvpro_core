<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nvpro_core: nvvk::BufferSubAllocator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">nvpro_core<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classnvvk_1_1_buffer_sub_allocator.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classnvvk_1_1_buffer_sub_allocator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">nvvk::BufferSubAllocator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;buffersuballocator_vk.hpp&gt;</code></p>
<div class="dynheader">
Collaboration diagram for nvvk::BufferSubAllocator:</div>
<div class="dyncontent">
<div class="center"><img src="classnvvk_1_1_buffer_sub_allocator__coll__graph.png" border="0" usemap="#anvvk_1_1_buffer_sub_allocator_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_binding.html">Binding</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_block.html">Block</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvvk_1_1_buffer_sub_allocator_1_1_handle.html">Handle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6c6fe2485036b70abc240c8d5f955107" id="r_a6c6fe2485036b70abc240c8d5f955107"><td class="memItemLeft" align="right" valign="top"><a id="a6c6fe2485036b70abc240c8d5f955107" name="a6c6fe2485036b70abc240c8d5f955107"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BufferSubAllocator</b> (<a class="el" href="classnvvk_1_1_buffer_sub_allocator.html">BufferSubAllocator</a> const &amp;)=delete</td></tr>
<tr class="separator:a6c6fe2485036b70abc240c8d5f955107"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006f56db0928c132139f7fd3039d67e3" id="r_a006f56db0928c132139f7fd3039d67e3"><td class="memItemLeft" align="right" valign="top"><a id="a006f56db0928c132139f7fd3039d67e3" name="a006f56db0928c132139f7fd3039d67e3"></a>
<a class="el" href="classnvvk_1_1_buffer_sub_allocator.html">BufferSubAllocator</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classnvvk_1_1_buffer_sub_allocator.html">BufferSubAllocator</a> const &amp;)=delete</td></tr>
<tr class="separator:a006f56db0928c132139f7fd3039d67e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecda2f8cf599f95c70e6dcd7ef8b55d2" id="r_aecda2f8cf599f95c70e6dcd7ef8b55d2"><td class="memItemLeft" align="right" valign="top"><a id="aecda2f8cf599f95c70e6dcd7ef8b55d2" name="aecda2f8cf599f95c70e6dcd7ef8b55d2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BufferSubAllocator</b> (<a class="el" href="classnvvk_1_1_mem_allocator.html">MemAllocator</a> *memAllocator, VkDeviceSize blockSize, VkBufferUsageFlags bufferUsageFlags, VkMemoryPropertyFlags memPropFlags=VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT, bool mapped=false, const std::vector&lt; uint32_t &gt; &amp;sharingQueueFamilyIndices=std::vector&lt; uint32_t &gt;())</td></tr>
<tr class="separator:aecda2f8cf599f95c70e6dcd7ef8b55d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a048b63e132280d2b981034356ec3d" id="r_aa1a048b63e132280d2b981034356ec3d"><td class="memItemLeft" align="right" valign="top"><a id="aa1a048b63e132280d2b981034356ec3d" name="aa1a048b63e132280d2b981034356ec3d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>init</b> (<a class="el" href="classnvvk_1_1_mem_allocator.html">MemAllocator</a> *memallocator, VkDeviceSize blockSize, VkBufferUsageFlags bufferUsageFlags, VkMemoryPropertyFlags memPropFlags=VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT, bool mapped=false, const std::vector&lt; uint32_t &gt; &amp;sharingQueues=std::vector&lt; uint32_t &gt;())</td></tr>
<tr class="separator:aa1a048b63e132280d2b981034356ec3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93370116027e3f315534972526da73ea" id="r_a93370116027e3f315534972526da73ea"><td class="memItemLeft" align="right" valign="top"><a id="a93370116027e3f315534972526da73ea" name="a93370116027e3f315534972526da73ea"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>deinit</b> ()</td></tr>
<tr class="separator:a93370116027e3f315534972526da73ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2126010f1e8de0096a4ca3f08b43b4a5" id="r_a2126010f1e8de0096a4ca3f08b43b4a5"><td class="memItemLeft" align="right" valign="top"><a id="a2126010f1e8de0096a4ca3f08b43b4a5" name="a2126010f1e8de0096a4ca3f08b43b4a5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setDebugName</b> (const std::string &amp;name)</td></tr>
<tr class="separator:a2126010f1e8de0096a4ca3f08b43b4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894cbb19f2a94561d69fa0e8cf39a1a0" id="r_a894cbb19f2a94561d69fa0e8cf39a1a0"><td class="memItemLeft" align="right" valign="top"><a id="a894cbb19f2a94561d69fa0e8cf39a1a0" name="a894cbb19f2a94561d69fa0e8cf39a1a0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setKeepLastBlockOnFree</b> (bool state)</td></tr>
<tr class="separator:a894cbb19f2a94561d69fa0e8cf39a1a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b25e3c6b5c9721ec2fbe1f070423cf" id="r_ab0b25e3c6b5c9721ec2fbe1f070423cf"><td class="memItemLeft" align="right" valign="top"><a id="ab0b25e3c6b5c9721ec2fbe1f070423cf" name="ab0b25e3c6b5c9721ec2fbe1f070423cf"></a>
VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><b>getBlockSize</b> () const</td></tr>
<tr class="separator:ab0b25e3c6b5c9721ec2fbe1f070423cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15cc0068145815b4a591e8f12b611540" id="r_a15cc0068145815b4a591e8f12b611540"><td class="memItemLeft" align="right" valign="top"><a id="a15cc0068145815b4a591e8f12b611540" name="a15cc0068145815b4a591e8f12b611540"></a>
<a class="el" href="classnvvk_1_1_buffer_sub_allocator_1_1_handle.html">Handle</a>&#160;</td><td class="memItemRight" valign="bottom"><b>subAllocate</b> (VkDeviceSize size, uint32_t alignment=BASE_ALIGNMENT)</td></tr>
<tr class="separator:a15cc0068145815b4a591e8f12b611540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de11ff60f7e2ed559f4823cbc27a3ab" id="r_a0de11ff60f7e2ed559f4823cbc27a3ab"><td class="memItemLeft" align="right" valign="top"><a id="a0de11ff60f7e2ed559f4823cbc27a3ab" name="a0de11ff60f7e2ed559f4823cbc27a3ab"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>subFree</b> (<a class="el" href="classnvvk_1_1_buffer_sub_allocator_1_1_handle.html">Handle</a> sub)</td></tr>
<tr class="separator:a0de11ff60f7e2ed559f4823cbc27a3ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d5cb3d098eb4a179148047949ca86a7" id="r_a7d5cb3d098eb4a179148047949ca86a7"><td class="memItemLeft" align="right" valign="top"><a id="a7d5cb3d098eb4a179148047949ca86a7" name="a7d5cb3d098eb4a179148047949ca86a7"></a>
<a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_binding.html">Binding</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getSubBinding</b> (<a class="el" href="classnvvk_1_1_buffer_sub_allocator_1_1_handle.html">Handle</a> handle)</td></tr>
<tr class="separator:a7d5cb3d098eb4a179148047949ca86a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ea247a67a8e2a32acdedba670f4ae5" id="r_a31ea247a67a8e2a32acdedba670f4ae5"><td class="memItemLeft" align="right" valign="top"><a id="a31ea247a67a8e2a32acdedba670f4ae5" name="a31ea247a67a8e2a32acdedba670f4ae5"></a>
<a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_binding.html">Binding</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getSubBinding</b> (<a class="el" href="classnvvk_1_1_buffer_sub_allocator_1_1_handle.html">Handle</a> handle, uint32_t alignment)</td></tr>
<tr class="separator:a31ea247a67a8e2a32acdedba670f4ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2165c51b63142bdaf8acd917608837f3" id="r_a2165c51b63142bdaf8acd917608837f3"><td class="memItemLeft" align="right" valign="top"><a id="a2165c51b63142bdaf8acd917608837f3" name="a2165c51b63142bdaf8acd917608837f3"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>getSubMapping</b> (<a class="el" href="classnvvk_1_1_buffer_sub_allocator_1_1_handle.html">Handle</a> handle, uint32_t alignment=BASE_ALIGNMENT) const</td></tr>
<tr class="separator:a2165c51b63142bdaf8acd917608837f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45dacae6c09e37a7dcc055086365057b" id="r_a45dacae6c09e37a7dcc055086365057b"><td class="memItemLeft" align="right" valign="top"><a id="a45dacae6c09e37a7dcc055086365057b" name="a45dacae6c09e37a7dcc055086365057b"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>getSubBlockIndex</b> (<a class="el" href="classnvvk_1_1_buffer_sub_allocator_1_1_handle.html">Handle</a> handle) const</td></tr>
<tr class="separator:a45dacae6c09e37a7dcc055086365057b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa613e9871b60bf3e621e7861b03efbf4" id="r_aa613e9871b60bf3e621e7861b03efbf4"><td class="memItemLeft" align="right" valign="top"><a id="aa613e9871b60bf3e621e7861b03efbf4" name="aa613e9871b60bf3e621e7861b03efbf4"></a>
VkBuffer&#160;</td><td class="memItemRight" valign="bottom"><b>getBlockBuffer</b> (uint32_t blockIndex) const</td></tr>
<tr class="separator:aa613e9871b60bf3e621e7861b03efbf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a547c48150a05f1ed25af7a6ea342819b" id="r_a547c48150a05f1ed25af7a6ea342819b"><td class="memItemLeft" align="right" valign="top"><a id="a547c48150a05f1ed25af7a6ea342819b" name="a547c48150a05f1ed25af7a6ea342819b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>getUtilization</b> (VkDeviceSize &amp;allocatedSize, VkDeviceSize &amp;usedSize) const</td></tr>
<tr class="separator:a547c48150a05f1ed25af7a6ea342819b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d6c15a5c8c8abc57e7287a987d0052" id="r_a16d6c15a5c8c8abc57e7287a987d0052"><td class="memItemLeft" align="right" valign="top"><a id="a16d6c15a5c8c8abc57e7287a987d0052" name="a16d6c15a5c8c8abc57e7287a987d0052"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>fitsInAllocated</b> (VkDeviceSize size, uint32_t alignment=BASE_ALIGNMENT) const</td></tr>
<tr class="separator:a16d6c15a5c8c8abc57e7287a987d0052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85b271637eab042b7f569165aa3bacc" id="r_af85b271637eab042b7f569165aa3bacc"><td class="memItemLeft" align="right" valign="top"><a id="af85b271637eab042b7f569165aa3bacc" name="af85b271637eab042b7f569165aa3bacc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>free</b> (bool onlyEmpty)</td></tr>
<tr class="separator:af85b271637eab042b7f569165aa3bacc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:addbe5a97d06fdae21f1649426252c599" id="r_addbe5a97d06fdae21f1649426252c599"><td class="memItemLeft" align="right" valign="top"><a id="addbe5a97d06fdae21f1649426252c599" name="addbe5a97d06fdae21f1649426252c599"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>setIndexValue</b> (uint32_t &amp;index, uint32_t newValue)</td></tr>
<tr class="separator:addbe5a97d06fdae21f1649426252c599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af826e239277800f8c5233ca2bc9739ef" id="r_af826e239277800f8c5233ca2bc9739ef"><td class="memItemLeft" align="right" valign="top"><a id="af826e239277800f8c5233ca2bc9739ef" name="af826e239277800f8c5233ca2bc9739ef"></a>
<a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_block.html">Block</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getBlock</b> (uint32_t index)</td></tr>
<tr class="separator:af826e239277800f8c5233ca2bc9739ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5c4c2658ad932077a3b270eb8fe678" id="r_a6a5c4c2658ad932077a3b270eb8fe678"><td class="memItemLeft" align="right" valign="top"><a id="a6a5c4c2658ad932077a3b270eb8fe678" name="a6a5c4c2658ad932077a3b270eb8fe678"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>freeBlock</b> (<a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_block.html">Block</a> &amp;block)</td></tr>
<tr class="separator:a6a5c4c2658ad932077a3b270eb8fe678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a770e1a397b80dd6269599758083678f9" id="r_a770e1a397b80dd6269599758083678f9"><td class="memItemLeft" align="right" valign="top"><a id="a770e1a397b80dd6269599758083678f9" name="a770e1a397b80dd6269599758083678f9"></a>
VkResult&#160;</td><td class="memItemRight" valign="bottom"><b>allocBlock</b> (<a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_block.html">Block</a> &amp;block, uint32_t id, VkDeviceSize size)</td></tr>
<tr class="separator:a770e1a397b80dd6269599758083678f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a76fd9968d3a664ce692208e55bdc5b49" id="r_a76fd9968d3a664ce692208e55bdc5b49"><td class="memItemLeft" align="right" valign="top"><a id="a76fd9968d3a664ce692208e55bdc5b49" name="a76fd9968d3a664ce692208e55bdc5b49"></a>
<a class="el" href="classnvvk_1_1_mem_allocator.html">MemAllocator</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>m_memAllocator</b> = nullptr</td></tr>
<tr class="separator:a76fd9968d3a664ce692208e55bdc5b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a43a12a0b18e796f38a81211a21bc51" id="r_a9a43a12a0b18e796f38a81211a21bc51"><td class="memItemLeft" align="right" valign="top"><a id="a9a43a12a0b18e796f38a81211a21bc51" name="a9a43a12a0b18e796f38a81211a21bc51"></a>
VkDevice&#160;</td><td class="memItemRight" valign="bottom"><b>m_device</b> = VK_NULL_HANDLE</td></tr>
<tr class="separator:a9a43a12a0b18e796f38a81211a21bc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ece83ad3ef46bcc5f0b4056e590ecce" id="r_a3ece83ad3ef46bcc5f0b4056e590ecce"><td class="memItemLeft" align="right" valign="top"><a id="a3ece83ad3ef46bcc5f0b4056e590ecce" name="a3ece83ad3ef46bcc5f0b4056e590ecce"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_memoryTypeIndex</b></td></tr>
<tr class="separator:a3ece83ad3ef46bcc5f0b4056e590ecce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f0ec94b6ef94e7c3346155fe77a17b" id="r_a56f0ec94b6ef94e7c3346155fe77a17b"><td class="memItemLeft" align="right" valign="top"><a id="a56f0ec94b6ef94e7c3346155fe77a17b" name="a56f0ec94b6ef94e7c3346155fe77a17b"></a>
VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><b>m_blockSize</b></td></tr>
<tr class="separator:a56f0ec94b6ef94e7c3346155fe77a17b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf32afb3eaed04b89d8c97e77ef6b9c1" id="r_acf32afb3eaed04b89d8c97e77ef6b9c1"><td class="memItemLeft" align="right" valign="top"><a id="acf32afb3eaed04b89d8c97e77ef6b9c1" name="acf32afb3eaed04b89d8c97e77ef6b9c1"></a>
VkBufferUsageFlags&#160;</td><td class="memItemRight" valign="bottom"><b>m_bufferUsageFlags</b></td></tr>
<tr class="separator:acf32afb3eaed04b89d8c97e77ef6b9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81edd5320ffedf70327f97fd07cadb18" id="r_a81edd5320ffedf70327f97fd07cadb18"><td class="memItemLeft" align="right" valign="top"><a id="a81edd5320ffedf70327f97fd07cadb18" name="a81edd5320ffedf70327f97fd07cadb18"></a>
VkMemoryPropertyFlags&#160;</td><td class="memItemRight" valign="bottom"><b>m_memoryPropFlags</b></td></tr>
<tr class="separator:a81edd5320ffedf70327f97fd07cadb18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab88d0973d5621264a11763482037c5c6" id="r_ab88d0973d5621264a11763482037c5c6"><td class="memItemLeft" align="right" valign="top"><a id="ab88d0973d5621264a11763482037c5c6" name="ab88d0973d5621264a11763482037c5c6"></a>
std::vector&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>m_sharingQueueFamilyIndices</b></td></tr>
<tr class="separator:ab88d0973d5621264a11763482037c5c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba8ebb6d576d0f2990ddf457a7e0e9c2" id="r_aba8ebb6d576d0f2990ddf457a7e0e9c2"><td class="memItemLeft" align="right" valign="top"><a id="aba8ebb6d576d0f2990ddf457a7e0e9c2" name="aba8ebb6d576d0f2990ddf457a7e0e9c2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_mapped</b></td></tr>
<tr class="separator:aba8ebb6d576d0f2990ddf457a7e0e9c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07ef7c810d19788ac12d62e57cc7128c" id="r_a07ef7c810d19788ac12d62e57cc7128c"><td class="memItemLeft" align="right" valign="top"><a id="a07ef7c810d19788ac12d62e57cc7128c" name="a07ef7c810d19788ac12d62e57cc7128c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_keepLastBlock</b> = false</td></tr>
<tr class="separator:a07ef7c810d19788ac12d62e57cc7128c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52cffcdcce4b6db41c0fb72e88541e7" id="r_ad52cffcdcce4b6db41c0fb72e88541e7"><td class="memItemLeft" align="right" valign="top"><a id="ad52cffcdcce4b6db41c0fb72e88541e7" name="ad52cffcdcce4b6db41c0fb72e88541e7"></a>
std::vector&lt; <a class="el" href="structnvvk_1_1_buffer_sub_allocator_1_1_block.html">Block</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>m_blocks</b></td></tr>
<tr class="separator:ad52cffcdcce4b6db41c0fb72e88541e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6cf3f3d1015a06f893512ba61e531c" id="r_a0d6cf3f3d1015a06f893512ba61e531c"><td class="memItemLeft" align="right" valign="top"><a id="a0d6cf3f3d1015a06f893512ba61e531c" name="a0d6cf3f3d1015a06f893512ba61e531c"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_regularBlocks</b> = 0</td></tr>
<tr class="separator:a0d6cf3f3d1015a06f893512ba61e531c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3410f9505130a26ea40bc4f20a7a3f2" id="r_ac3410f9505130a26ea40bc4f20a7a3f2"><td class="memItemLeft" align="right" valign="top"><a id="ac3410f9505130a26ea40bc4f20a7a3f2" name="ac3410f9505130a26ea40bc4f20a7a3f2"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_freeBlockIndex</b></td></tr>
<tr class="separator:ac3410f9505130a26ea40bc4f20a7a3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2636ca9ae7422515904827439f26d26a" id="r_a2636ca9ae7422515904827439f26d26a"><td class="memItemLeft" align="right" valign="top"><a id="a2636ca9ae7422515904827439f26d26a" name="a2636ca9ae7422515904827439f26d26a"></a>
VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><b>m_allocatedSize</b></td></tr>
<tr class="separator:a2636ca9ae7422515904827439f26d26a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a0b35fbf2f15051ff1be2684f33826" id="r_a36a0b35fbf2f15051ff1be2684f33826"><td class="memItemLeft" align="right" valign="top"><a id="a36a0b35fbf2f15051ff1be2684f33826" name="a36a0b35fbf2f15051ff1be2684f33826"></a>
VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><b>m_usedSize</b></td></tr>
<tr class="separator:a36a0b35fbf2f15051ff1be2684f33826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a916ab03f385afcfe2a130ee2e254074b" id="r_a916ab03f385afcfe2a130ee2e254074b"><td class="memItemLeft" align="right" valign="top"><a id="a916ab03f385afcfe2a130ee2e254074b" name="a916ab03f385afcfe2a130ee2e254074b"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>m_debugName</b></td></tr>
<tr class="separator:a916ab03f385afcfe2a130ee2e254074b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>@DOC_START </p>
<h1><a class="anchor" id="autotoc_md144"></a>
class nvvk::BufferSubAllocator</h1>
<p><a class="el" href="classnvvk_1_1_buffer_sub_allocator.html">nvvk::BufferSubAllocator</a> provides buffer sub allocation using larger buffer blocks. The blocks are one VkBuffer each and are allocated via the provided nvvk::MemAllocator.</p>
<p>The requested buffer space is sub-allocated and recycled in blocks internally. This way we avoid creating lots of small VkBuffers and can avoid calling the Vulkan API at all, when there are blocks with sufficient empty space. While Vulkan is more efficient than previous APIs, creating lots of objects for it, is still not good for overall performance. It will result into more cache misses and use more system memory over all.</p>
<p>Be aware that each sub-allocation is always BASE_ALIGNMENT aligned. A custom alignment during allocation can be requested, it will ensure that the returned sub-allocation range of offset &amp; size can account for the original requested size fitting within and respecting the requested</p>
<p>This, however, means the regular offset and may not match the requested alignment, and the regular size can be bigger to account for the shift caused by manual alignment.</p>
<p>It is therefore necessary to pass the alignment that was used at allocation time to the query functions as well.</p>
<div class="fragment"><div class="line"><span class="comment">// alignment &lt;= BASE_ALIGNMENT</span></div>
<div class="line">    handle  = subAllocator.subAllocate(size);</div>
<div class="line">    binding = subAllocator.getSubBinding(handle);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// alignment &gt; BASE_ALIGNMENT</span></div>
<div class="line">    handle  = subAllocator.subAllocate(size, alignment);</div>
<div class="line">    binding = subAllocator.getSubBinding(handle, alignment);</div>
</div><!-- fragment --><p> @DOC_END </p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li><b>buffersuballocator_vk.hpp</b></li>
<li><b>buffersuballocator_vk.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacenvvk.html">nvvk</a></li><li class="navelem"><a class="el" href="classnvvk_1_1_buffer_sub_allocator.html">BufferSubAllocator</a></li>
    <li class="footer">Generated on Thu Apr 3 2025 15:08:53 for nvpro_core by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
